<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <!-- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta http-equiv="X-Frame-Options" content="DENY" />
    <meta name="referrer" content="strict-origin-when-cross-origin" />
    <!-- Google Analytics 4 (è‡ªåˆ†é™¤å¤–å¯¾å¿œ) -->
    <script>
      if (localStorage.getItem('excludeFromAnalytics') !== 'true') {
        var script = document.createElement('script');
        script.async = true;
        script.src = 'https://www.googletagmanager.com/gtag/js?id=G-ERDSPE9CZM';
        document.head.appendChild(script);
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-ERDSPE9CZM');
      }
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="ã½ã„ãƒŠãƒ“" />
    <meta name="theme-color" content="#ffffff" />
    <title>ã½ã„ãƒŠãƒ“ - ã‚¤ãƒ™ãƒ³ãƒˆ</title>
    <meta name="description" content="è¿‘ãã®ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã‚’è¡¨ç¤ºã€‚åŠå¾„8kmä»¥å†…ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’æœ€å¤§30ä»¶è¡¨ç¤ºã—ã¾ã™ã€‚" />
    <link rel="icon" type="image/png" href="icon-192.png" />
    <link rel="apple-touch-icon" href="icon-192.png" />
    <link rel="manifest" href="manifest.json" />
    <link rel="stylesheet" href="./style.css?v=113" />
    <!-- FOUCå¯¾ç­–: CSSãƒ­ãƒ¼ãƒ‰å‰ã«ãƒ†ãƒ¼ãƒã‚’é©ç”¨ -->
    <script>
      (function() {
        var theme = localStorage.getItem("poinavi_theme") || "light";
        document.documentElement.className = theme === "dark" ? "dark-mode" : "light-mode";
      })();
    </script>
    <style>
      /* FOUCå¯¾ç­–: åˆæœŸèƒŒæ™¯è‰² */
      html.light-mode { background-color: #f5f5f7; }
      html.dark-mode { background-color: #1a1a1a; }
      
      /* ã‚¤ãƒ™ãƒ³ãƒˆãƒšãƒ¼ã‚¸å°‚ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
      .event-main {
        flex: 1;
        overflow-y: auto;
        padding: 0 16px 16px;
        -webkit-overflow-scrolling: touch;
      }
      
      /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ç”¨ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ */
      .dark-mode .event-main::-webkit-scrollbar {
        width: 8px;
      }
      .dark-mode .event-main::-webkit-scrollbar-track {
        background: #2a2a2a;
      }
      .dark-mode .event-main::-webkit-scrollbar-thumb {
        background: #555;
        border-radius: 4px;
      }
      .dark-mode .event-main::-webkit-scrollbar-thumb:hover {
        background: #666;
      }
      
      /* ãƒ˜ãƒƒãƒ€ãƒ¼æƒ…å ±ï¼ˆæ°—æ¸©ãƒ»ä½ç½®ï¼‰ */
      .event-header {
        position: sticky;
        top: 0;
        background: var(--bg-primary);
        padding: 16px 0;
        z-index: 10;
        border-bottom: 1px solid var(--border-color);
      }
      
      .event-header__weather {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 8px;
      }
      
      .event-header__temp {
        font-size: 2rem;
        font-weight: 700;
        color: var(--text-primary);
      }
      
      .event-header__weather-icon {
        font-size: 2rem;
      }
      
      .event-header__weather-desc {
        font-size: 0.875rem;
        color: var(--text-secondary);
      }
      
      .event-header__location {
        display: flex;
        align-items: center;
        gap: 6px;
        font-size: 0.8125rem;
        color: var(--text-secondary);
      }
      
      .event-header__location svg {
        width: 14px;
        height: 14px;
        flex-shrink: 0;
      }
      
      /* ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒˆ */
      .event-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
        padding-top: 16px;
      }
      
      .event-list__title {
        font-size: 0.9375rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 4px;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      
      .event-list__count {
        font-size: 0.75rem;
        font-weight: 500;
        color: var(--text-secondary);
        background: var(--bg-secondary);
        padding: 2px 8px;
        border-radius: 12px;
      }
      
      /* ã‚¤ãƒ™ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰ - ãƒ¢ãƒ€ãƒ³ãƒ‡ã‚¶ã‚¤ãƒ³ */
      .event-card {
        background: var(--bg-secondary);
        border-radius: 16px;
        padding: 16px;
        display: flex;
        flex-direction: column;
        gap: 12px;
        border: 1px solid var(--border-color);
        transition: box-shadow 0.2s ease;
      }
      
      .event-card:hover {
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
      }
      
      .dark-mode .event-card:hover {
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
      }
      
      .event-card__header {
        display: flex;
        align-items: flex-start;
        gap: 12px;
      }
      
      .event-card__date-badge {
        flex-shrink: 0;
        width: 52px;
        background: linear-gradient(135deg, #FECAC9, #F5B0AE);
        border-radius: 12px;
        padding: 8px 4px;
        text-align: center;
        color: #333;
      }
      
      .event-card__date-month {
        font-size: 0.625rem;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        opacity: 0.9;
      }
      
      .event-card__date-day {
        font-size: 1.25rem;
        font-weight: 700;
        line-height: 1.2;
      }
      
      .event-card__date-weekday {
        font-size: 0.625rem;
        font-weight: 500;
        opacity: 0.9;
      }
      
      .event-card__info {
        flex: 1;
        min-width: 0;
      }
      
      .event-card__title {
        font-size: 0.9375rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 6px;
        line-height: 1.4;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }
      
      .event-card__time {
        display: flex;
        align-items: center;
        gap: 4px;
        font-size: 0.75rem;
        color: var(--text-secondary);
        margin-bottom: 4px;
      }
      
      .event-card__time svg {
        width: 12px;
        height: 12px;
        flex-shrink: 0;
      }
      
      .event-card__meta {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }
      
      .event-card__meta-item {
        display: flex;
        align-items: flex-start;
        gap: 6px;
        font-size: 0.8125rem;
        color: var(--text-secondary);
        line-height: 1.4;
      }
      
      .event-card__meta-item svg {
        width: 14px;
        height: 14px;
        flex-shrink: 0;
        margin-top: 1px;
        color: var(--text-secondary);
        opacity: 0.7;
      }
      
      /* ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ */
      .event-card__actions {
        display: flex;
        gap: 8px;
        margin-top: 4px;
      }
      
      .event-card__btn {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        padding: 10px 12px;
        border-radius: 10px;
        font-size: 0.8125rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.15s ease;
        text-decoration: none;
        border: none;
      }
      
      .event-card__btn svg {
        width: 16px;
        height: 16px;
        flex-shrink: 0;
      }
      
      .event-card__btn--primary {
        background: linear-gradient(135deg, #2196F3, #1976D2);
        color: white;
      }
      
      .event-card__btn--primary:hover {
        background: linear-gradient(135deg, #1976D2, #1565C0);
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(33, 150, 243, 0.3);
      }
      
      .event-card__btn--primary:active {
        transform: translateY(0);
      }
      
      .event-card__btn--secondary {
        background: #4CAF50;
        color: white;
        border: none;
      }
      
      .event-card__btn--secondary:hover {
        background: #45a049;
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(76, 175, 80, 0.3);
      }
      
      .event-card__btn--secondary:active {
        transform: scale(0.98);
      }
      
      /* ãƒ¡ãƒ¢è¿½åŠ æˆåŠŸãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ */
      .event-card__btn--success {
        background: #388E3C !important;
        color: white !important;
      }
      
      /* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° */
      .event-loading {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 60px 20px;
        text-align: center;
      }
      
      .event-loading__spinner {
        width: 40px;
        height: 40px;
        border: 3px solid var(--border-color);
        border-top-color: #2196F3;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-bottom: 16px;
      }
      
      @keyframes spin {
        to { transform: rotate(360deg); }
      }
      
      .event-loading__text {
        font-size: 0.9375rem;
        color: var(--text-secondary);
      }
      
      /* ã‚¨ãƒ©ãƒ¼è¡¨ç¤º */
      .event-error {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 60px 20px;
        text-align: center;
      }
      
      .event-error__icon {
        font-size: 3rem;
        margin-bottom: 16px;
      }
      
      .event-error__title {
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 8px;
      }
      
      .event-error__message {
        font-size: 0.875rem;
        color: var(--text-secondary);
        margin-bottom: 20px;
        line-height: 1.5;
      }
      
      .event-error__btn {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 10px 20px;
        background: #2196F3;
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 0.875rem;
        font-weight: 500;
        cursor: pointer;
        text-decoration: none;
      }
      
      /* ç©ºçŠ¶æ…‹ */
      .event-empty {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 60px 20px;
        text-align: center;
      }
      
      .event-empty__icon {
        font-size: 3rem;
        margin-bottom: 16px;
      }
      
      .event-empty__title {
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 8px;
      }
      
      .event-empty__message {
        font-size: 0.875rem;
        color: var(--text-secondary);
        line-height: 1.5;
      }
      
      /* å›æ•°åˆ¶é™è­¦å‘Š */
      .rate-limit-warning {
        background: #FFF3E0;
        border: 1px solid #FFB74D;
        border-radius: 8px;
        padding: 12px 16px;
        margin-bottom: 16px;
        display: flex;
        align-items: flex-start;
        gap: 10px;
      }
      
      .dark-mode .rate-limit-warning {
        background: rgba(255, 183, 77, 0.15);
        border-color: rgba(255, 183, 77, 0.4);
      }
      
      .rate-limit-warning__icon {
        font-size: 1.25rem;
        flex-shrink: 0;
      }
      
      .rate-limit-warning__text {
        font-size: 0.8125rem;
        color: #E65100;
        line-height: 1.5;
      }
      
      .dark-mode .rate-limit-warning__text {
        color: #FFB74D;
      }
      
      /* ä¸å¯è¦–ã‚¹ãƒšãƒ¼ã‚µãƒ¼ */
      .translate-header__icon-btn--invisible {
        visibility: hidden;
        pointer-events: none;
      }
    </style>
  </head>
  <body>
    <!-- é•·æŠ¼ã—ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ç„¡åŠ¹åŒ– -->
    <script>
      document.addEventListener('contextmenu', function(e) { e.preventDefault(); });
    </script>
    
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header class="translate-header">
      <!-- å·¦å´ã‚¹ãƒšãƒ¼ã‚µãƒ¼ -->
      <div class="translate-header__icon-btn translate-header__icon-btn--invisible" aria-hidden="true"></div>
      
      <h1 class="translate-header__title">
        <img src="./logo.svg" alt="ã½ã„ãƒŠãƒ“" class="translate-header__logo" />
      </h1>
      
      <!-- è¨­å®šãƒœã‚¿ãƒ³ -->
      <button id="eventSettingsButton" class="translate-header__icon-btn translate-header__icon-btn--right" type="button" aria-label="è¨­å®š">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="3"></circle>
          <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
        </svg>
      </button>
    </header>

    <!-- è¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="eventSettingsModal" class="translate-modal hidden">
      <div class="translate-modal__overlay"></div>
      <div class="translate-modal__content">
        <div class="translate-modal__header">
          <h2 class="translate-modal__title">è¨­å®š</h2>
          <button class="translate-modal__close" id="eventSettingsClose" aria-label="é–‰ã˜ã‚‹">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
        <div class="translate-modal__body">
          <!-- èµ·å‹•ãƒšãƒ¼ã‚¸ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
          <div class="translate-modal__section">
            <div class="translate-modal__section-title">ãƒˆãƒƒãƒ—è¡¨ç¤º</div>
            <select id="eventStartPageSelect" class="translate-modal__select">
              <option value="index.html">ğŸ“ ãƒ¡ãƒ¢</option>
              <option value="translate.html">ğŸŒ ç¿»è¨³</option>
              <option value="map.html">ğŸ—ºï¸ åœ°å›³</option>
            </select>
          </div>
          <!-- ãƒ†ãƒ¼ãƒã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
          <div class="translate-modal__section">
            <div class="translate-modal__section-title">ãƒ†ãƒ¼ãƒ</div>
            <button id="eventThemeToggle" class="translate-modal__theme-toggle">
              <span class="theme-icon">â˜€ï¸</span>
              <span class="theme-text">ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰</span>
            </button>
          </div>
          <!-- å…è²¬äº‹é …ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
          <div class="translate-modal__section">
            <div class="translate-modal__section-title">å…è²¬äº‹é …</div>
            <div class="settings-modal__disclaimer-text">
              <p>æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã€Œã½ã„ãƒŠãƒ“ã€ã¯ã€å‚è€ƒæƒ…å ±ã‚’æä¾›ã™ã‚‹ã‚‚ã®ã§ã™ã€‚</p>
              <ul>
                <li>ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã¯å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆEventbriteï¼‰ã‹ã‚‰å–å¾—ã—ã¦ã„ã¾ã™</li>
                <li>ã‚¤ãƒ™ãƒ³ãƒˆã®é–‹å‚¬çŠ¶æ³ã¯å¤‰æ›´ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™</li>
                <li>æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®åˆ©ç”¨ã«ã‚ˆã‚Šç”Ÿã˜ãŸæå®³ã«ã¤ã„ã¦ã€é‹å–¶è€…ã¯ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <main class="event-main" id="eventMain">
      <!-- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºï¼ˆåˆæœŸï¼‰ -->
      <div class="event-loading" id="eventLoading">
        <div class="event-loading__spinner"></div>
        <p class="event-loading__text">ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã‚’å–å¾—ä¸­...</p>
      </div>
      
      <!-- ã‚¤ãƒ™ãƒ³ãƒˆå†…å®¹ï¼ˆJS ã§æŒ¿å…¥ï¼‰ -->
      <div id="eventContent" style="display: none;">
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆæ°—æ¸©ãƒ»ä½ç½®ï¼‰ -->
        <div class="event-header" id="eventHeader">
          <div class="event-header__weather">
            <span class="event-header__weather-icon" id="weatherIcon">ğŸŒ¤</span>
            <span class="event-header__temp" id="weatherTemp">--Â°C</span>
            <span class="event-header__weather-desc" id="weatherDesc">å–å¾—ä¸­...</span>
          </div>
          <div class="event-header__location">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
              <circle cx="12" cy="10" r="3"></circle>
            </svg>
            <span id="locationText">ä½ç½®æƒ…å ±å–å¾—ä¸­...</span>
          </div>
        </div>
        
        <!-- ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒˆ -->
        <div class="event-list" id="eventList">
          <div class="event-list__title">
            è¿‘ãã®ã‚¤ãƒ™ãƒ³ãƒˆ
            <span class="event-list__count" id="eventCount">0ä»¶</span>
          </div>
          <!-- ã‚¤ãƒ™ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰ã¯JSã§æŒ¿å…¥ -->
        </div>
      </div>
      
      <!-- ã‚¨ãƒ©ãƒ¼è¡¨ç¤º -->
      <div class="event-error" id="eventError" style="display: none;">
        <div class="event-error__icon">ğŸ˜¢</div>
        <h2 class="event-error__title">ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</h2>
        <p class="event-error__message" id="errorMessage">ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚</p>
        <a href="./map.html" class="event-error__btn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
          åœ°å›³ã«æˆ»ã‚‹
        </a>
      </div>
      
      <!-- ç©ºçŠ¶æ…‹ -->
      <div class="event-empty" id="eventEmpty" style="display: none;">
        <div class="event-empty__icon">ğŸ“­</div>
        <h2 class="event-empty__title">ã‚¤ãƒ™ãƒ³ãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</h2>
        <p class="event-empty__message">åŠå¾„8kmä»¥å†…ã«äºˆå®šã•ã‚Œã¦ã„ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã¯ã‚ã‚Šã¾ã›ã‚“ã€‚<br>åˆ¥ã®å ´æ‰€ã§è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚</p>
      </div>
    </main>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer class="translate-footer">
      <a href="./map.html" class="translate-footer__btn" aria-label="åœ°å›³ãƒšãƒ¼ã‚¸ã¸">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"/>
          <line x1="8" y1="2" x2="8" y2="18"/>
          <line x1="16" y1="6" x2="16" y2="22"/>
        </svg>
        <span class="translate-footer__label">ãƒãƒƒãƒ—</span>
      </a>
      <a
        href="https://note.com/pointlab/magazines"
        target="_blank"
        rel="noopener noreferrer"
        class="translate-footer__banner"
      >
        <img src="./poyonkun_full.png" alt="ã½ã„ã‚“ã¨ã‚‰ã¼" class="translate-footer__logo" />
      </a>
      <a href="./index.html" class="translate-footer__btn" aria-label="ãƒ¡ãƒ¢ãƒšãƒ¼ã‚¸ã¸">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        <span class="translate-footer__label">ãƒ¡ãƒ¢</span>
      </a>
    </footer>

    <script>
      // ============================================
      // ã‚¤ãƒ™ãƒ³ãƒˆãƒšãƒ¼ã‚¸ - ãƒ¡ã‚¤ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
      // ============================================
      
      // å®šæ•°
      const CACHE_KEY = 'poinavi_event_cache';
      const CACHE_TTL = 10 * 60 * 1000; // 10åˆ†
      const SEARCH_RADIUS_KM = 8;
      const MAX_EVENTS = 30;
      
      // OpenWeather APIï¼ˆç„¡æ–™æ ï¼‰
      const OPENWEATHER_API_KEY = 'YOUR_OPENWEATHER_API_KEY'; // å®Ÿéš›ã®ã‚­ãƒ¼ã«ç½®ãæ›ãˆ
      
      // å¤©æ°—ã‚¢ã‚¤ã‚³ãƒ³ãƒãƒƒãƒ”ãƒ³ã‚°
      const WEATHER_ICONS = {
        '01d': 'â˜€ï¸', '01n': 'ğŸŒ™',
        '02d': 'â›…', '02n': 'â˜ï¸',
        '03d': 'â˜ï¸', '03n': 'â˜ï¸',
        '04d': 'â˜ï¸', '04n': 'â˜ï¸',
        '09d': 'ğŸŒ§ï¸', '09n': 'ğŸŒ§ï¸',
        '10d': 'ğŸŒ¦ï¸', '10n': 'ğŸŒ§ï¸',
        '11d': 'â›ˆï¸', '11n': 'â›ˆï¸',
        '13d': 'â„ï¸', '13n': 'â„ï¸',
        '50d': 'ğŸŒ«ï¸', '50n': 'ğŸŒ«ï¸'
      };
      
      // ============================================
      // åˆæœŸåŒ–
      // ============================================
      const LAST_EVENT_LOCATION_KEY = 'poinavi_last_event_location';
      
      document.addEventListener('DOMContentLoaded', function() {
        initTheme();
        initSettingsModal();
        initStartPageSelect();
        
        // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰åº§æ¨™ã‚’å–å¾—
        const params = new URLSearchParams(window.location.search);
        let lat = parseFloat(params.get('lat'));
        let lng = parseFloat(params.get('lng'));
        
        // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒãªã„å ´åˆã€ä¿å­˜æ¸ˆã¿ã®ä½ç½®æƒ…å ±ã‚’ä½¿ç”¨
        if (isNaN(lat) || isNaN(lng)) {
          const savedLocation = localStorage.getItem(LAST_EVENT_LOCATION_KEY);
          if (savedLocation) {
            try {
              const loc = JSON.parse(savedLocation);
              lat = loc.lat;
              lng = loc.lng;
            } catch (e) {
              console.error('ä¿å­˜æ¸ˆã¿ä½ç½®æƒ…å ±ã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', e);
            }
          }
        }
        
        // ãã‚Œã§ã‚‚åº§æ¨™ãŒãªã„å ´åˆã¯ã‚¨ãƒ©ãƒ¼
        if (isNaN(lat) || isNaN(lng)) {
          showError('ä½ç½®æƒ…å ±ãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚åœ°å›³ã‹ã‚‰ä½ç½®ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
          return;
        }
        
        // ã‚¤ãƒ™ãƒ³ãƒˆå–å¾—ï¼ˆãƒ¬ãƒ¼ãƒˆåˆ¶é™ã¯map.htmlå´ã§ãƒã‚§ãƒƒã‚¯æ¸ˆã¿ï¼‰
        loadEvents(lat, lng);
      });
      
      // ============================================
      // ãƒ†ãƒ¼ãƒç®¡ç†
      // ============================================
      function initTheme() {
        const savedTheme = localStorage.getItem("poinavi_theme") || "light";
        const isDark = savedTheme === "dark";
        document.body.classList.toggle("dark-mode", isDark);
        document.body.classList.toggle("light-mode", !isDark);
        updateThemeButton();
      }
      
      function updateThemeButton() {
        const themeToggle = document.getElementById("eventThemeToggle");
        if (!themeToggle) return;
        
        const isDark = document.body.classList.contains("dark-mode");
        const icon = themeToggle.querySelector(".theme-icon");
        const text = themeToggle.querySelector(".theme-text");
        
        if (icon) icon.textContent = isDark ? "ğŸŒ™" : "â˜€ï¸";
        if (text) text.textContent = isDark ? "ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰" : "ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰";
      }
      
      // ============================================
      // è¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ«
      // ============================================
      function initSettingsModal() {
        const modal = document.getElementById("eventSettingsModal");
        const openBtn = document.getElementById("eventSettingsButton");
        const closeBtn = document.getElementById("eventSettingsClose");
        const overlay = modal?.querySelector(".translate-modal__overlay");
        const themeToggle = document.getElementById("eventThemeToggle");
        
        if (!modal || !openBtn || !closeBtn) return;
        
        openBtn.addEventListener("click", function() {
          modal.classList.remove("hidden");
          history.pushState({ modal: "eventSettings" }, "");
        });
        
        closeBtn.addEventListener("click", function() {
          modal.classList.add("hidden");
        });
        
        if (overlay) {
          overlay.addEventListener("click", function() {
            modal.classList.add("hidden");
          });
        }
        
        if (themeToggle) {
          themeToggle.addEventListener("click", function() {
            const isDark = document.body.classList.contains("dark-mode");
            document.body.classList.toggle("dark-mode", !isDark);
            document.body.classList.toggle("light-mode", isDark);
            document.documentElement.classList.toggle("dark-mode", !isDark);
            document.documentElement.classList.toggle("light-mode", isDark);
            localStorage.setItem("poinavi_theme", isDark ? "light" : "dark");
            updateThemeButton();
          });
        }
        
        // Androidæˆ»ã‚‹ãƒœã‚¿ãƒ³å¯¾å¿œ
        window.addEventListener("popstate", function(event) {
          if (modal && !modal.classList.contains("hidden")) {
            modal.classList.add("hidden");
          }
        });
      }
      
      function initStartPageSelect() {
        const select = document.getElementById("eventStartPageSelect");
        if (!select) return;
        
        const savedStartPage = localStorage.getItem("poinavi_start_page") || "index.html";
        select.value = savedStartPage;
        
        select.addEventListener("change", function() {
          localStorage.setItem("poinavi_start_page", this.value);
        });
      }
      
      
      // ============================================
      // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†ï¼ˆä¸Šæ›¸ãæ–¹å¼ï¼‰
      // ============================================
      function getCacheKey(lat, lng) {
        // 8kmç¯„å›²ã§ã‚°ãƒ«ãƒ¼ãƒ”ãƒ³ã‚°ï¼ˆç´„0.07åº¦ï¼‰
        const gridLat = Math.floor(lat / 0.07) * 0.07;
        const gridLng = Math.floor(lng / 0.07) * 0.07;
        return `${gridLat.toFixed(2)}_${gridLng.toFixed(2)}`;
      }
      
      function getCache(lat, lng) {
        const cacheKey = getCacheKey(lat, lng);
        const cacheData = JSON.parse(localStorage.getItem(CACHE_KEY) || '{}');
        const cached = cacheData[cacheKey];
        
        if (cached && Date.now() - cached.timestamp < CACHE_TTL) {
          // é–‹å‚¬çµ‚äº†ã‚¤ãƒ™ãƒ³ãƒˆã‚’é™¤å¤–ã—ã¦è¿”ã™
          const filteredEvents = filterExpiredEvents(cached.events);
          if (filteredEvents.length > 0) {
            return { ...cached, events: filteredEvents };
          }
        }
        
        return null;
      }
      
      function setCache(lat, lng, events) {
        const cacheKey = getCacheKey(lat, lng);
        
        // å‰å›åˆ†ã‚’å…¨ä»¶å‰Šé™¤ã—ã¦ä¸Šæ›¸ã
        const cacheData = {};
        
        cacheData[cacheKey] = {
          events: events,
          timestamp: Date.now()
        };
        
        localStorage.setItem(CACHE_KEY, JSON.stringify(cacheData));
      }
      
      // ============================================
      // é–‹å‚¬çµ‚äº†ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
      // ============================================
      function filterExpiredEvents(events) {
        if (!events || !Array.isArray(events)) return [];
        
        const now = new Date();
        return events.filter(event => {
          // endãŒã‚ã‚‹å ´åˆã¯çµ‚äº†æ™‚åˆ»ã€ãªã‘ã‚Œã°é–‹å§‹æ™‚åˆ»ã§åˆ¤å®š
          const eventEnd = event.end ? new Date(event.end) : new Date(event.start);
          return eventEnd > now;
        });
      }
      
      // ============================================
      // ã‚¤ãƒ™ãƒ³ãƒˆå–å¾—
      // ============================================
      async function loadEvents(lat, lng) {
        // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒã‚§ãƒƒã‚¯
        const cached = getCache(lat, lng);
        if (cached) {
          displayEvents(cached.events, lat, lng);
          fetchWeather(lat, lng);
          return;
        }
        
        try {
          // æ³¨: Eventbrite APIã¯å®Ÿéš›ã«ã¯ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§å‘¼ã³å‡ºã™å¿…è¦ãŒã‚ã‚Šã¾ã™
          // ã“ã“ã§ã¯ãƒ‡ãƒ¢ç”¨ã®ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨
          const events = await fetchEventsMock(lat, lng);
          
          // é–‹å‚¬çµ‚äº†ã‚¤ãƒ™ãƒ³ãƒˆã‚’é™¤å¤–
          const activeEvents = filterExpiredEvents(events);
          
          // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä¿å­˜ï¼ˆãƒ•ã‚£ãƒ«ã‚¿æ¸ˆã¿ï¼‰
          setCache(lat, lng, activeEvents);
          
          // è¡¨ç¤º
          displayEvents(activeEvents, lat, lng);
          fetchWeather(lat, lng);
          
        } catch (err) {
          console.error('ã‚¤ãƒ™ãƒ³ãƒˆå–å¾—ã‚¨ãƒ©ãƒ¼:', err);
          showError('ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚<br>ã—ã°ã‚‰ãã—ã¦ã‹ã‚‰ãŠè©¦ã—ãã ã•ã„ã€‚');
        }
      }
      
      // ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ï¼ˆå®Ÿéš›ã¯ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§Eventbrite APIã‚’å‘¼ã³å‡ºã™ï¼‰
      async function fetchEventsMock(lat, lng) {
        // ãƒ‡ãƒ¢ç”¨ã®é…å»¶
        await new Promise(resolve => setTimeout(resolve, 1500));
        
        // ãƒ‡ãƒ¢ç”¨ã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿
        const now = new Date();
        const events = [];
        
        const demoTitles = [
          'ãƒ†ãƒƒã‚¯ãƒŸãƒ¼ãƒˆã‚¢ãƒƒãƒ— 2026',
          'ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ãƒ”ãƒƒãƒã‚¤ãƒ™ãƒ³ãƒˆ',
          'ãƒ‡ã‚¶ã‚¤ãƒ³æ€è€ƒãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—',
          'AI/MLå‹‰å¼·ä¼š',
          'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒŠã‚¤ãƒˆ',
          'ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°åˆå¿ƒè€…å‘ã‘è¬›åº§',
          'ãƒ“ã‚¸ãƒã‚¹ã‚»ãƒŸãƒŠãƒ¼',
          'ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–å±•ç¤ºä¼š'
        ];
        
        const demoVenues = [
          'ã€‡ã€‡ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚»ãƒ³ã‚¿ãƒ¼',
          'â–³â–³ãƒ›ãƒ¼ãƒ«',
          'â–¡â–¡ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ãƒ«ãƒ¼ãƒ ',
          'â—‡â—‡ã‚¹ãƒšãƒ¼ã‚¹'
        ];
        
        const numEvents = Math.floor(Math.random() * 8) + 3; // 3-10ä»¶
        
        for (let i = 0; i < numEvents; i++) {
          const startDate = new Date(now.getTime() + (i + 1) * 24 * 60 * 60 * 1000);
          const endDate = new Date(startDate.getTime() + 3 * 60 * 60 * 1000);
          
          events.push({
            id: `demo_${i}`,
            title: demoTitles[i % demoTitles.length],
            start: startDate.toISOString(),
            end: endDate.toISOString(),
            venue_name: demoVenues[i % demoVenues.length],
            address: `æ±äº¬éƒ½æ¸‹è°·åŒºâ—‹â—‹${i + 1}-${i + 2}-${i + 3}`,
            event_url: 'https://www.eventbrite.com/'
          });
        }
        
        return events;
      }
      
      // ============================================
      // å¤©æ°—å–å¾—
      // ============================================
      async function fetchWeather(lat, lng) {
        try {
          // ãƒ‡ãƒ¢ç”¨ï¼ˆå®Ÿéš›ã¯OpenWeather APIã‚’ä½¿ç”¨ï¼‰
          const temp = Math.floor(Math.random() * 15) + 10;
          const icons = Object.values(WEATHER_ICONS);
          const icon = icons[Math.floor(Math.random() * icons.length)];
          const descs = ['æ™´ã‚Œ', 'æ›‡ã‚Š', 'å°é›¨', 'å¿«æ™´'];
          const desc = descs[Math.floor(Math.random() * descs.length)];
          
          document.getElementById('weatherTemp').textContent = `${temp}Â°C`;
          document.getElementById('weatherIcon').textContent = icon;
          document.getElementById('weatherDesc').textContent = desc;
          
          // ä½ç½®æƒ…å ±ï¼ˆé€†ã‚¸ã‚ªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼‰
          fetchAddress(lat, lng);
          
        } catch (err) {
          console.error('å¤©æ°—å–å¾—ã‚¨ãƒ©ãƒ¼:', err);
        }
      }
      
      // ============================================
      // é€†ã‚¸ã‚ªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆä½æ‰€å–å¾—ï¼‰
      // ============================================
      async function fetchAddress(lat, lng) {
        const locationEl = document.getElementById('locationText');
        
        try {
          // Google Maps Geocoding APIï¼ˆç„¡æ–™æ ã§ã‚‚ä½¿ç”¨å¯èƒ½ï¼‰
          const response = await fetch(
            `https://maps.googleapis.com/maps/api/geocode/json?latlng=${lat},${lng}&language=ja&key=AIzaSyDA62Ge5UHqpZOFQhMhVSvQI_xWABrftL0`
          );
          
          if (!response.ok) {
            throw new Error('Geocoding API error');
          }
          
          const data = await response.json();
          
          if (data.status === 'OK' && data.results && data.results.length > 0) {
            // æœ€ã‚‚è©³ç´°ãªä½æ‰€ã‚’å–å¾—
            const address = data.results[0].formatted_address;
            // æ—¥æœ¬ã®ä½æ‰€å½¢å¼ã‹ã‚‰ã€Œæ—¥æœ¬ã€ã€’xxx-xxxx ã€ã‚’é™¤å»
            const cleanAddress = address
              .replace(/^æ—¥æœ¬[ã€,]\s*/, '')
              .replace(/ã€’\d{3}-\d{4}\s*/, '');
            locationEl.textContent = cleanAddress || address;
          } else {
            // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼šç·¯åº¦çµŒåº¦ã‚’è¡¨ç¤º
            locationEl.textContent = `åŒ—ç·¯${lat.toFixed(4)}Â° æ±çµŒ${lng.toFixed(4)}Â°`;
          }
        } catch (err) {
          console.error('ä½æ‰€å–å¾—ã‚¨ãƒ©ãƒ¼:', err);
          // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼šç·¯åº¦çµŒåº¦ã‚’è¡¨ç¤º
          locationEl.textContent = `åŒ—ç·¯${lat.toFixed(4)}Â° æ±çµŒ${lng.toFixed(4)}Â°`;
        }
      }
      
      // ============================================
      // è¡¨ç¤º
      // ============================================
      function displayEvents(events, lat, lng) {
        document.getElementById('eventLoading').style.display = 'none';
        document.getElementById('eventError').style.display = 'none';
        
        if (!events || events.length === 0) {
          document.getElementById('eventEmpty').style.display = 'flex';
          return;
        }
        
        document.getElementById('eventContent').style.display = 'block';
        document.getElementById('eventCount').textContent = `${events.length}ä»¶`;
        
        const listEl = document.getElementById('eventList');
        const titleEl = listEl.querySelector('.event-list__title');
        
        // æ—¢å­˜ã®ã‚«ãƒ¼ãƒ‰ã‚’å‰Šé™¤
        listEl.querySelectorAll('.event-card').forEach(el => el.remove());
        
        // ã‚¤ãƒ™ãƒ³ãƒˆã‚«ãƒ¼ãƒ‰ã‚’è¿½åŠ 
        events.forEach(event => {
          const card = createEventCard(event);
          listEl.appendChild(card);
        });
      }
      
      function createEventCard(event) {
        const card = document.createElement('div');
        card.className = 'event-card';
        
        const startDate = new Date(event.start);
        const endDate = new Date(event.end);
        
        const month = startDate.getMonth() + 1;
        const day = startDate.getDate();
        const weekdays = ['æ—¥', 'æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ'];
        const weekday = weekdays[startDate.getDay()];
        const timeStr = `${formatTime(startDate)} - ${formatTime(endDate)}`;
        
        // ãƒ¡ãƒ¢ç”¨ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆï¼ˆãƒªãƒ³ã‚¯ä»˜ãï¼‰
        const memoText = `ã€${escapeHtml(event.title)}ã€‘\nğŸ“… ${month}/${day}(${weekday}) ${timeStr}\nğŸ“ ${escapeHtml(event.venue_name)}\nğŸ  ${escapeHtml(event.address)}\nğŸ”— ${event.event_url}`;
        
        card.innerHTML = `
          <div class="event-card__header">
            <div class="event-card__date-badge">
              <div class="event-card__date-month">${month}æœˆ</div>
              <div class="event-card__date-day">${day}</div>
              <div class="event-card__date-weekday">${weekday}</div>
            </div>
            <div class="event-card__info">
              <h3 class="event-card__title">${escapeHtml(event.title)}</h3>
              <div class="event-card__time">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"></circle>
                  <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
                ${timeStr}
              </div>
            </div>
          </div>
          <div class="event-card__meta">
            <div class="event-card__meta-item">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                <circle cx="12" cy="10" r="3"></circle>
              </svg>
              <span>${escapeHtml(event.venue_name)}</span>
            </div>
            <div class="event-card__meta-item">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
              </svg>
              <span>${escapeHtml(event.address)}</span>
            </div>
          </div>
          <div class="event-card__actions">
            <a href="${escapeHtml(event.event_url)}" target="_blank" rel="noopener noreferrer" class="event-card__btn event-card__btn--primary">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                <polyline points="15 3 21 3 21 9"></polyline>
                <line x1="10" y1="14" x2="21" y2="3"></line>
              </svg>
              æƒ…å ±ã‚’è¦‹ã‚‹
            </a>
            <button type="button" class="event-card__btn event-card__btn--secondary" data-memo="${encodeURIComponent(memoText)}">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="12" y1="18" x2="12" y2="12"></line>
                <line x1="9" y1="15" x2="15" y2="15"></line>
              </svg>
              ãƒ¡ãƒ¢ã«è¿½åŠ 
            </button>
          </div>
        `;
        
        // ãƒ¡ãƒ¢ã«è¿½åŠ ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆ
        const memoBtn = card.querySelector('.event-card__btn--secondary');
        memoBtn.addEventListener('click', function() {
          addToMemo(this);
        });
        
        return card;
      }
      
      // ãƒ¡ãƒ¢ã«è¿½åŠ æ©Ÿèƒ½
      function addToMemo(btn) {
        const memoText = decodeURIComponent(btn.dataset.memo);
        
        // æ—¢å­˜ã®ãƒ¡ãƒ¢ã‚’å–å¾—
        const MEMO_KEY = 'poinavi_memos';
        const memos = JSON.parse(localStorage.getItem(MEMO_KEY) || '[]');
        
        // æ–°ã—ã„ãƒ¡ãƒ¢ã‚’è¿½åŠ ï¼ˆãƒ¡ãƒ¢ãƒšãƒ¼ã‚¸ã®å½¢å¼ã«åˆã‚ã›ã‚‹ï¼‰
        const newMemo = {
          id: Date.now().toString(),
          content: memoText,
          createdAt: new Date().toISOString()
        };
        
        memos.unshift(newMemo);
        localStorage.setItem(MEMO_KEY, JSON.stringify(memos));
        
        // ãƒœã‚¿ãƒ³ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
        const originalHTML = btn.innerHTML;
        btn.innerHTML = `
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="20 6 9 17 4 12"></polyline>
          </svg>
          è¿½åŠ ã—ã¾ã—ãŸ
        `;
        btn.classList.add('event-card__btn--success');
        btn.disabled = true;
        
        setTimeout(() => {
          btn.innerHTML = originalHTML;
          btn.classList.remove('event-card__btn--success');
          btn.disabled = false;
        }, 2000);
      }
      
      function formatEventDate(date) {
        const month = date.getMonth() + 1;
        const day = date.getDate();
        const weekdays = ['æ—¥', 'æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ'];
        const weekday = weekdays[date.getDay()];
        return `${month}/${day}(${weekday})`;
      }
      
      function formatTime(date) {
        const hours = date.getHours().toString().padStart(2, '0');
        const minutes = date.getMinutes().toString().padStart(2, '0');
        return `${hours}:${minutes}`;
      }
      
      function showError(message) {
        document.getElementById('eventLoading').style.display = 'none';
        document.getElementById('eventContent').style.display = 'none';
        document.getElementById('eventEmpty').style.display = 'none';
        
        const errorEl = document.getElementById('eventError');
        document.getElementById('errorMessage').innerHTML = message;
        errorEl.style.display = 'flex';
      }
      
      function escapeHtml(text) {
        if (!text) return '';
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
      }
    </script>
  </body>
</html>
